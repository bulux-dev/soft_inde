<div class="content">

  <div class="page-header">
    <div class="page-title">
      <h4>Agregar Sucursal</h4>
      <h6>Completa el formulario</h6>
    </div>
  </div>

  <div class="tab-content" [formGroup]="sucursalForm">
    <div class="tab-pane show active" id="general">
      <div class="row">
        <div class="col-lg-8">
          <div class="card">
            <div class="card-body">
              <div class="row">
                <div class="col-lg-3 col-sm-6 col-12">
                  <div class="form-group">
                    <label>Nombre</label>
                    <input formControlName="nombre" type="text">
                  </div>
                </div>
                <div class="col-lg-3 col-12">
                  <div class="form-group">
                    <label>Número</label>
                    <input formControlName="numero" type="text">
                  </div>
                </div>
                <div class="col-lg-4 col-12">
                  <div class="form-group">
                    <label>Teléfono</label>
                    <input formControlName="telefono" type="text">
                  </div>
                </div>
                <div class="col-lg-6 col-12">
                  <div class="form-group">
                    <label>Dirección</label>
                    <input formControlName="direccion" type="text">
                  </div>
                </div>
                </div>
                <div class="col-12" class="text-end">
                  @if (!oc) {
                  <a routerLink="../" class="btn btn-cancel me-2">
                    <i class="fas fa-reply"></i> Regresar
                  </a>
                  }
                  <a (click)="postSucursal()" [ngClass]="{'disabled': sucursalForm.invalid}"
                    class="btn btn-submit btn-sm me-2" permiso="agregar-sucursal">
                    @if (loading) {
                    <span class="spinner-border spinner-border-sm"></span>
                    } @else {
                    <i class="fas fa-save"></i> Guardar
                    }
                  </a>
                </div>
              </div>
            </div>
        </div>
        @if (!oc) {
          <div class="col-lg-4">
            <div class="card">
              <div class="card-body">
                <div class="row">
                  <div class="col-6">
                    <h6>Bodegas</h6>
                  </div>
                  <div class="col-6 text-end">
                    <a class="link" data-bs-toggle="offcanvas" data-bs-target="#bodegas">
                      <i class="fas fa-plus"></i> Nueva
                    </a>
                  </div>
                  <div class="col-12">
                    <br>
                    <ng-multiselect-dropdown [placeholder]="'Sin seleccion'" [settings]="selectM" [data]="bodegas"
                      formControlName="sucursales_bodegas">
                    </ng-multiselect-dropdown>
                  </div>
                </div>
              </div>
            </div>
          </div>
        }

      </div>
    </div>
  </div>
</div>
<div class="offcanvas offcanvas-end" id="bodegas">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title">Agregar Bodega</h5>
    <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body">

    <app-agregar-bodega [oc]="true" (newItemEvent)="getBodegas($event)"></app-agregar-bodega>

  </div>
</div>